(this.webpackJsonpchallenge=this.webpackJsonpchallenge||[]).push([[0],{23:function(e,t,a){},30:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(7),r=a(3),s=a(2),i=a(10),o=a(5),l=a(12),d=a(13),u=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"login",value:function(e,t){var a=this;return fetch("http://localhost:3000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){if(e.ok)return e.json();throw new Error("\xc9chec de la requ\xeate de connexion")})).then((function(e){var t=e.token;return localStorage.setItem("token",t),console.log("Token:",t),a.isAuthenticated=!0,!0})).catch((function(e){return console.error("Erreur:",e),a.isAuthenticated=!1,!1}))}}]),e}();u.isAuthenticated=!1;a(23);var j=a(0),b=function(){var e=Object(r.f)(),t=Object(n.useState)({username:{value:""},password:{value:""}}),a=Object(o.a)(t,2),c=a[0],l=a[1],d=Object(n.useState)("Vous \xeates d\xe9connect\xe9."),b=Object(o.a)(d,2),h=b[0],m=b[1],p=function(e){var t=e.target.name,a=e.target.value,n=Object(i.a)({},t,{value:a});l(Object(s.a)(Object(s.a)({},c),n))},O=function(t){t.preventDefault(),function(){var e=c;if(c.username.value.length<3){var t={value:c.username.value,error:"Votre pr\xe9nom doit faire au moins 3 caract\xe8res de long.",isValid:!1};e=Object(s.a)(Object(s.a)({},e),{username:t})}else{var a={value:c.username.value,error:"",isValid:!0};e=Object(s.a)(Object(s.a)({},e),{username:a})}if(c.password.value.length<3){var n={value:c.password.value,error:"Votre mot de passe doit faire au moins 3 caract\xe8res de long.",isValid:!1};e=Object(s.a)(Object(s.a)({},e),{password:n})}else{var r={value:c.password.value,error:"",isValid:!0};e=Object(s.a)(Object(s.a)({},e),{password:r})}return l(e),e.username.isValid&&e.password.isValid}()&&(m("\ud83d\udc49 Tentative de connexion en cours ..."),u.login(c.username.value,c.password.value).then((function(t){t?e.push("/boat"):m("\ud83d\udd10 Identifiant ou mot de passe incorrect.")})))};return Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:Object(j.jsxs)("form",{onSubmit:function(e){return O(e)},style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col s12 m8 offset-m2 center-align",children:[h&&Object(j.jsx)("div",{style:{margin:"10px"},children:Object(j.jsx)("div",{children:h})}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"username",children:"Identifiant"}),Object(j.jsx)("input",{id:"username",type:"text",name:"username",className:"form-control",style:{maxWidth:"200px",textAlign:"center"},value:c.username.value,onChange:function(e){return p(e)}})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),Object(j.jsx)("input",{id:"password",type:"password",name:"password",className:"form-control",style:{maxWidth:"200px",textAlign:"center"},value:c.password.value,onChange:function(e){return p(e)}})]}),Object(j.jsx)("div",{className:"center",children:Object(j.jsx)("button",{type:"submit",className:"btn",children:"Valider"})})]})}),Object(j.jsx)("button",{type:"button",className:"btn",style:{marginTop:"10px"},children:"Cr\xe9er un utilisateur"})]})})},h=function(){return Object(j.jsxs)("div",{className:"center",children:[Object(j.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT0DP59uOz44SZu_HkgTMCyVsq8tiSUXwJTxg&usqp=CAU",alt:"Page non trouv\xe9e"}),Object(j.jsx)("h1",{children:"Hey, cette page n'existe pas !"}),Object(j.jsx)(c.b,{to:"/",className:"waves-effect waves-teal btn-flat",children:"Retourner \xe0 l'accueil"})]})},m=function(e){var t=e.boat,a=e.borderColor,c=void 0===a?"#009688":a,s=Object(n.useState)(),i=Object(o.a)(s,2),l=i[0],d=i[1],u=Object(r.f)();return Object(j.jsx)("div",{className:"col s6 m4",onClick:function(){return e=t.id,void u.push("/boat/".concat(e));var e},onMouseEnter:function(){d(c)},onMouseLeave:function(){d("#f5f5f5")},children:Object(j.jsxs)("div",{className:"card",style:{borderColor:l,borderRadius:"10px",display:"flex",flexDirection:"column"},children:[Object(j.jsx)("div",{className:"card-image",children:Object(j.jsx)("img",{src:t.picture,alt:t.name,style:{height:"200px",objectFit:"cover",borderRadius:"10px 10px 0 0"}})}),Object(j.jsx)("div",{className:"card-content",style:{padding:"10px"},children:Object(j.jsx)("p",{style:{wordWrap:"break-word",textAlign:"center",margin:"0"},children:t.name})})]})})},p=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"getBoats",value:function(){var e=this;return fetch("http://localhost:3000/api/boats",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).catch((function(t){return e.handleError(t)}))}},{key:"getBoat",value:function(e){var t=this;return fetch("http://localhost:3000/api/boats/".concat(e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){return t.isEmpty(e)?null:e})).catch((function(e){return t.handleError(e)}))}},{key:"updateBoat",value:function(e){var t=this;return fetch("http://localhost:3000/api/boats/".concat(e.id),{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).catch((function(e){return t.handleError(e)}))}},{key:"deleteBoat",value:function(e){var t=this;return fetch("http://localhost:3000/api/boats/".concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).catch((function(e){return t.handleError(e)}))}},{key:"addBoat",value:function(e){var t=this;return fetch("http://localhost:3000/api/boats",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).catch((function(e){return t.handleError(e)}))}},{key:"isEmpty",value:function(e){return 0===Object.keys(e).length}},{key:"handleError",value:function(e){console.error(e)}}]),e}();p.createUser=function(e,t){var a={username:e,password:t};return fetch("http://localhost:3000/api/users",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return p.handleError(e)}))};var O=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){p.getBoats().then((function(e){return r(e)}))}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"center",children:"WAAAAA LES BEAUX BATEAU"}),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{className:"row",children:a.map((function(e){return Object(j.jsx)(m,{boat:e},e.id)}))}),Object(j.jsx)(c.b,{className:"btn-floating btn-large waves-effect waves-light red z-depth-3",style:{position:"fixed",bottom:"25px",right:"25px"},to:"/boat/add",children:Object(j.jsx)("i",{className:"material-icons",children:"add"})})]})]})},v=function(e){var t=e.boat,a=Object(r.f)(),c=Object(n.useState)({picture:{value:t.picture},name:{value:t.name,isValid:!0},description:{value:t.description,isValid:!0}}),l=Object(o.a)(c,2),d=l[0],u=l[1],b=function(e){var t=e.target.name,a=e.target.value,n=Object(i.a)({},t,{value:a});u(Object(s.a)(Object(s.a)({},d),n))},h=function(){var e=d;if(d.name.value){var t={value:d.name.value,error:"",isValid:!0};e=Object(s.a)(Object(s.a)({},e),{name:t})}else{var a={value:d.name.value,error:"le nom de l'Boat est requis (1-25)",isValid:!1};e=Object(s.a)(Object(s.a)({},e),{name:a})}if(d.description.value){var n={value:d.description.value,error:"",isValid:!0};e=Object(s.a)(Object(s.a)({},e),{description:n})}else{var c={value:d.description.value,error:"pas ouf",isValid:!1};e=Object(s.a)(Object(s.a)({},e),{description:c})}return u(e),e.name.isValid};return Object(j.jsx)("form",{onSubmit:function(e){return function(e){e.preventDefault(),h()&&(t.name=d.name.value,t.description=d.description.value,p.updateBoat(t).then((function(){return a.push("/boat/".concat(t.id))})))}(e)},children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col s12 m8 offset-m2",children:Object(j.jsxs)("div",{className:"card hoverable",children:[Object(j.jsxs)("div",{className:"card-image",children:[Object(j.jsx)("img",{src:t.picture,alt:t.name,style:{width:"250px",margin:"0 auto"}}),Object(j.jsx)("span",{className:"btn-floating halfway-fab waves-effect waves-light",children:Object(j.jsx)("i",{onClick:function(){p.deleteBoat(t).then((function(){return a.push("/Boat")}))},className:"material-icons",children:"delete"})})]}),Object(j.jsxs)("div",{className:"card-stacked",children:[Object(j.jsxs)("div",{className:"card-content",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Nom"}),Object(j.jsx)("input",{id:"name",name:"name",type:"text",className:"form-control",value:d.name.value,onChange:function(e){return b(e)}}),d.name.error&&Object(j.jsx)("div",{className:"card-panel red accent-1",children:d.name.error})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"description"}),Object(j.jsx)("input",{id:"description",name:"description",type:"text",className:"form-control",value:d.description.value,onChange:function(e){return b(e)}}),d.description.error&&Object(j.jsx)("div",{className:"card-panel red accent-1",children:d.description.error})]})]}),Object(j.jsx)("div",{className:"card-action center",children:Object(j.jsx)("button",{type:"submit",className:"btn",children:"Valider"})})]})]})})})})},f=function(e){var t=e.match,a=Object(n.useState)(null),c=Object(o.a)(a,2),r=c[0],s=c[1];return Object(n.useEffect)((function(){p.getBoat(+t.params.id).then((function(e){return s(e.data)})),console.log(t.params.id)}),[t.params.id]),Object(j.jsx)("div",{children:r?Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("h2",{className:"header center",children:["\xc9diter ",r.name]}),Object(j.jsx)(v,{boat:r})]}):Object(j.jsx)("h4",{className:"center",children:"Aucun bateau \xe0 afficher !"})})},x=function(e){var t=e.match,a=Object(n.useState)(null),r=Object(o.a)(a,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){p.getBoat(+t.params.id).then((function(e){return i(e.data)}))}),[t.params.id]),console.log("egal======",s),Object(j.jsx)("div",{children:s?Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col s12 m8 offset-m2",children:[Object(j.jsx)("h2",{className:"header center",children:s.name}),Object(j.jsxs)("div",{className:"card hoverable",children:[Object(j.jsxs)("div",{className:"card-image",children:[Object(j.jsx)("img",{src:s.picture,alt:s.name,style:{width:"250px",margin:"0 auto"}}),Object(j.jsx)(c.b,{to:"/boat/edit/".concat(s.id),className:"btn btn-floating halfway-fab waves-effect waves-light",children:Object(j.jsx)("i",{className:"material-icons",children:"edit"})})]}),Object(j.jsxs)("div",{className:"card-stacked",children:[Object(j.jsx)("div",{className:"card-content",children:Object(j.jsx)("table",{className:"bordered striped",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Nom"}),Object(j.jsx)("td",{children:Object(j.jsx)("strong",{children:s.name})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"description"}),Object(j.jsx)("td",{children:Object(j.jsx)("strong",{children:s.description})})]})]})})}),Object(j.jsx)("div",{className:"card-action",children:Object(j.jsx)(c.b,{to:"/boat",children:"Retour"})})]})]})]})}):Object(j.jsx)("h4",{className:"center",children:"Aucun bateau \xe0 afficher !"})})},g=function(e){var t=e.boat,a=Object(r.f)(),c=Object(n.useState)({picture:{value:t.picture||""},name:{value:t.name||"",isValid:!0},description:{value:t.description||"",isValid:!0}}),l=Object(o.a)(c,2),d=l[0],u=l[1],b=function(e){var t=e.target.name,a=e.target.value,n=Object(i.a)({},t,{value:a});u(Object(s.a)(Object(s.a)({},d),n))},h=function(){var e=d,t={value:d.picture.value,error:"",isValid:!0};if(e=Object(s.a)(Object(s.a)({},d),{},{picture:Object(s.a)(Object(s.a)({},d.picture),t)}),d.name.value){var a={value:d.name.value,error:"",isValid:!0};e=Object(s.a)(Object(s.a)({},e),{name:a})}else{var n={value:d.name.value,error:"le nom de l'Boat est requis (1-25)",isValid:!1};e=Object(s.a)(Object(s.a)({},e),{name:n})}if(d.description.value){var c={value:d.description.value,error:"",isValid:!0};e=Object(s.a)(Object(s.a)({},e),{description:c})}else{var r={value:d.description.value,error:"pas ouf",isValid:!1};e=Object(s.a)(Object(s.a)({},e),{description:r})}return u(e),e.name.isValid};return Object(j.jsx)("form",{onSubmit:function(e){return function(e){e.preventDefault(),h(),t.picture=d.picture.value,t.name=d.name.value,t.description=d.description.value,p.addBoat(t).then((function(){return a.push("/boat")}))}(e)},children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col s12 m8 offset-m2",children:Object(j.jsxs)("div",{className:"card hoverable",children:[Object(j.jsxs)("div",{className:"card-image",children:[Object(j.jsx)("img",{src:t.picture,alt:t.name,style:{width:"250px",margin:"0 auto"}}),Object(j.jsx)("span",{className:"btn-floating halfway-fab waves-effect waves-light",children:Object(j.jsx)("i",{onClick:function(){p.deleteBoat(t).then((function(){return a.push("/Boat")}))},className:"material-icons",children:"delete"})})]}),Object(j.jsxs)("div",{className:"card-stacked",children:[Object(j.jsxs)("div",{className:"card-content",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Img"}),Object(j.jsx)("input",{id:"picture",name:"picture",type:"text",className:"form-control",value:d.picture.value,onChange:function(e){return b(e)}}),d.picture.error&&Object(j.jsx)("div",{className:"card-panel red accent-1",children:d.picture.error})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Nom"}),Object(j.jsx)("input",{id:"name",name:"name",type:"text",className:"form-control",value:d.name.value,onChange:function(e){return b(e)}}),d.name.error&&Object(j.jsx)("div",{className:"card-panel red accent-1",children:d.name.error})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"description"}),Object(j.jsx)("input",{id:"description",name:"description",type:"text",className:"form-control",value:d.description.value,onChange:function(e){return b(e)}}),d.description.error&&Object(j.jsx)("div",{className:"card-panel red accent-1",children:d.description.error})]})]}),Object(j.jsx)("div",{className:"card-action center",children:Object(j.jsx)("button",{type:"submit",className:"btn",children:"Valider"})})]})]})})})})},N=Object(d.a)((function e(t,a,n,c){Object(l.a)(this,e),this.id=void 0,this.name=void 0,this.description=void 0,this.picture=void 0,this.id=0,this.name=a,this.description=n,this.picture=c})),y=function(){var e=Object(n.useState)((new Date).getTime()),t=Object(o.a)(e,1)[0],a=Object(n.useState)(new N(t)),c=Object(o.a)(a,1)[0];return Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("h2",{className:"header center",children:" Ajouter un bateau"}),Object(j.jsx)(g,{boat:c})]})},w=(a(30),function(){return Object(j.jsx)(c.a,{children:Object(j.jsx)("div",{children:Object(j.jsxs)(r.c,{children:[Object(j.jsx)(r.a,{exact:!0,path:"/",component:b}),Object(j.jsx)(r.a,{exact:!0,path:"/login",component:b}),Object(j.jsx)(r.a,{exact:!0,path:"/boat",component:O}),Object(j.jsx)(r.a,{exact:!0,path:"/boat/add",component:y}),Object(j.jsx)(r.a,{exact:!0,path:"/boat/edit/:id",component:f}),Object(j.jsx)(r.a,{path:"/boat/:id",component:x}),Object(j.jsx)(r.a,{component:h})]})})})}),S=a(21);a.n(S).a.render(Object(j.jsx)(w,{}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.216fd18b.chunk.js.map